<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pixel Dino</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: #87ceeb;
    }
    #score {
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 48px;
      font-family: monospace;
      color: #0033cc;
      text-shadow: 2px 2px #000;
      z-index: 10;
    }
    #overlay {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      font-size: 48px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: monospace;
      display: none;
    }
  </style>
</head>
<body>
<div id="score">000000</div>
<div id="overlay"></div>
<canvas id="gameCanvas" width="1920" height="1080"></canvas>

<audio id="jumpSound" src="jump.wav"></audio>
<audio id="deathSound" src="death.wav"></audio>
<audio id="landSound" src="land.wav"></audio>
<audio id="music" src="music.mp3" loop autoplay></audio>

<script>
  const canvas = document.getElementById("gameCanvas");
  const ctx = canvas.getContext("2d");
  const overlay = document.getElementById("overlay");

  let paused = false;
  let score = 0;
  let frame = 0;
  let level = 1;
  let moveLeft = false;
  let moveRight = false;
  let direction = "right";

  const jumpSound = document.getElementById("jumpSound");
  const deathSound = document.getElementById("deathSound");
  const landSound = document.getElementById("landSound");

  const dinoLeftImg = new Image();
  dinoLeftImg.src = "dino_left.png";

  const dinoRightImg = new Image();
  dinoRightImg.src = "dino_right.png";

  const dino = {
    x: 100, y: 880, width: 200, height: 200,
    vy: 0, gravity: 1.2, jumpForce: -24, alive: true
  };

  const eggs = [];
  const platforms = [];

  function spawnPlatform() {
    const y = 600 + Math.random() * 400;
    platforms.push({ x: canvas.width, y: y, width: 200, height: 30 });
    if (Math.random() < 0.5) {
      eggs.push({ x: canvas.width + 100, y: y - 30, width: 40, height: 40 });
    }
  }

  function update() {
    if (!dino.alive || paused) return;

    frame++;
    dino.vy += dino.gravity;

    if (moveLeft) {
      dino.x -= 5;
      direction = "left";
    }
    if (moveRight) {
      dino.x += 5;
      direction = "right";
    }

    dino.y += dino.vy;

    if (dino.y + dino.height >= 1000) {
      dino.y = 1000 - dino.height;
      dino.vy = 0;
      landSound.play();
    }

    platforms.forEach(p => p.x -= 5);
    eggs.forEach(e => e.x -= 5);

    if (frame % 120 === 0) spawnPlatform();
    if (frame % 60 === 0) score += 10;

    eggs.forEach(e => {
      if (dino.x < e.x + e.width && dino.x + dino.width > e.x &&
          dino.y < e.y + e.height && dino.y + dino.height > e.y) {
        deathSound.play();
        dino.alive = false;
        overlay.innerText = "GAME OVER\nScore: " + score + "\nPress R to Restart";
        overlay.style.display = "flex";
      }
    });

    platforms.forEach(p => {
      if (dino.vy < 0 &&
          dino.x + dino.width > p.x && dino.x < p.x + p.width &&
          dino.y < p.y + p.height && dino.y > p.y) {
        deathSound.play();
        dino.alive = false;
        overlay.innerText = "GAME OVER\nScore: " + score + "\nPress R to Restart";
        overlay.style.display = "flex";
      }
    });

    if (score >= 1000 * level) {
      level++;
      overlay.innerText = "SUCCESS!!\nNext Level";
      overlay.style.display = "flex";
      paused = true;
    }
  }

  function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = "#000";
    ctx.fillRect(0, 1000, canvas.width, 80);

    const dinoSprite = direction === "left" ? dinoLeftImg : dinoRightImg;
    ctx.drawImage(dinoSprite, dino.x, dino.y, dino.width, dino.height);

    platforms.forEach(p => {
      ctx.fillStyle = "#222";
      ctx.fillRect(p.x, p.y, p.width, p.height);
    });

    eggs.forEach(e => {
      ctx.fillStyle = "#cc33cc";
      ctx.beginPath();
      ctx.ellipse(e.x, e.y, 20, 30, 0, 0, Math.PI * 2);
      ctx.fill();
    });

    document.getElementById("score").textContent = String(score).padStart(6, '0');
  }

  function loop() {
    if (!paused) {
      update();
      draw();
    }
    requestAnimationFrame(loop);
  }

  document.addEventListener("keydown", e => {
    if (e.code === "ArrowLeft") moveLeft = true;
    if (e.code === "ArrowRight") moveRight = true;

    if (e.code === "Space" && dino.alive) {
      dino.vy = dino.jumpForce;
      jumpSound.play();
    } else if (e.key === "0") {
      paused = !paused;
      overlay.style.display = paused ? "flex" : "none";
      overlay.innerText = paused ? "PAUSED\nScore: " + score : "";
    } else if (e.key === "r" && !dino.alive) {
      location.reload();
    }
  });

  document.addEventListener("keyup", e => {
    if (e.code === "ArrowLeft") moveLeft = false;
    if (e.code === "ArrowRight") moveRight = false;
  });

  loop();
</script>
</body>
</html>